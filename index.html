<html lang="en">
<head>
    <meta charset="utf-8">
    <title>Html Generated</title>
    <meta name="description" content="Figma htmlGenerator">
    <meta name="author" content="htmlGenerator">
    <link href="https://fonts.googleapis.com/css?family=Roboto&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css?family=Nunito&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css?family=Baloo&display=swap" rel="stylesheet">

    <link rel="stylesheet" href="styles.css">
    <style>
        /*
        Figma Background for illustrative/preview purposes only.
        You can remove this style tag with no consequence
        */
        body {background: #E5E5E5;}
    </style>
</head>

<body>
<div id="container">
    <div id="e1_3"></div>
    <span id="name">MITRA MABARU</span>
    <span id="e1_14">Kontak :</span>
    <span id="phone">(62) 81 1192 1131</span>
    <span id="email">info@mabaru.com</span>
    <span id="e2_3">Alamat :</span>
    <span id="address">Sektor Melati, Jl. Boulevard Grand Depok City No.4, Tirtajaya Kec. Cilodong, Depok - 16413</span>
    <span id="e2_0">â’¸MITRA RESMI MABARU</span>
    <span id="e2_1">ID: <span id="partnerId">1234 5678 9012 3456</span></span>
</div>
<script src="assets/html-to-image.js"></script>
<script>
    function formatPhoneNumber(phone) {
        const len = phone.length;
        if (phone.startsWith('0')) phone = phone.substring(1);
        if (phone.startsWith('62')) phone = phone.substring(2);

        const first = phone.substring(0, 4)
        const twice = phone.substring(len - 8, len - 4);
        const third = phone.substring(len - 4, len);
        return `(62) ${first} ${twice} ${third}`
    }

    function formatTitleCase(text) {
        const textArray = text.split(' ');
        console.log(textArray)
        const titleArray = textArray.map(text => {
            return ['rt', 'rw'].includes(text) ? text.toUpperCase() : text[0].toUpperCase() + text.slice(1)
        })
        return titleArray.join(' ')
    }

    const params = window.location.search.replace('?', '').split('&')
    params.map(item => {
        let [key, value] = item.split('=');
        if (!['name', 'email', 'phone', 'address', 'partnerId'].includes(key)) return;
        value = decodeURIComponent(value);
        if (key === 'name') value = value.toLocaleUpperCase();
        if (key === 'phone') value = formatPhoneNumber(value);
        if (key === 'address') value = formatTitleCase(value);
        if (key === 'partnerId') value = value.toLocaleUpperCase();
        document.getElementById(key).innerText = value;
    });
</script>
</body>
</html>